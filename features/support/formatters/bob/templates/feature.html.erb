<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bob Report - <%= @feature[:name] %></title>
  <%= asset_tags('../') %>
</head>
<body id="feature">

  <div id="feature-name">
    <%= @feature[:name] %>
  </div>

  <div class="description">
    <%= @feature[:description].gsub(/\n/, '<br>') %>
  </div>

  <div class="elements">
    <% (@feature[:elements] || []).each do |element| %>
      <div class="element">

        <div class="header">
          <span class="type"><%= /^Scenario/ =~ element[:type] ? 'Requirement' : element[:type] %>:</span>
          <span class="name"><%= element[:name] %></span><br>
          <span class="description"><%= element[:description].gsub(/\n/, '<br>') %></span>
        </div>

        <ul class="steps">
          <% element[:steps].each do |s| %>
            <li class="step <%= status_class_name(s[:status]) %>">
              <%= "#{ s[:keyword] } #{ s[:name] }" %>
            </li>
          <% end %>
        </ul><!-- class="steps" -->

        <% if examples = element[:examples] %>
          <div class="examples">
            <% examples.each do |x| %>

              <div class="header">
                <span class="type">Examples:</span>
                <span class="name"><%= x[:name] %></span><br>
              </div>

              <table class="table table-bordered">
                <tr>
                  <% x[:rows][0].each do |header| %>
                    <th><%= header[:value] %></th>
                  <% end %>
                </tr>
                <% (1...x[:rows].length).each do |index| %>
                  <tr>
                    <% x[:rows][index].each do |cell| %>
                      <td>
                        <span class="<%= status_class_name(cell[:status]) %>"><%= cell[:value] %></span>
                      </td>
                    <% end %>
                  </tr>
                <% end %>
              </table>

            <% end %>
          </div><!-- class="examples" -->
        <% end %>

      </div><!-- class="element" -->
    <% end %>
  </div><!-- class="elements" -->

</body>
</html>